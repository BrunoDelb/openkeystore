<?xml version="1.0" encoding="UTF-8"?>
<!-- SKS WS Descriptor File to be used with "WSCreator" -->
<WebService NameSpace="http://xmlns.webpki.org/sks/v0.61"
            Service="SKSWS"
            DefaultURL="http://localhost:8080/securekeystore"
            WSDLLocation="META-INF/SKSWS.wsdl"
            Qualified="false"
            xmlns="http://xmlns.webpki.org/wscreator.1.00">

   <LicenseHeader><![CDATA[/*
 *  Copyright 2006-2011 WebPKI.org (http://webpki.org).
 *
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 *
 */
]]></LicenseHeader>
   <JavaServer ClassName="org.webpki.sks.ws.server.SKSWSImplementation"
               Imports="java.util.ArrayList">
     <ClassHeader><![CDATA[/**
 *  This is the server :-)
 */
]]></ClassHeader>
<!--
     <SupportCode><![CDATA[
	   void localMethod (String epub)
	     {
	     }
]]></SupportCode>
  -->
   </JavaServer>
   <JavaClient ClassName="org.webpki.sks.ws.client.SKSWSProxy">
     <ClassHeader><![CDATA[/**
 *  This is the client :-)
 */
]]></ClassHeader>
   </JavaClient>
   <DotNetClient ClassName="org.webpki.sks.ws.client.SKSWSProxy" PathAsDirectory="false">
     <ClassHeader><![CDATA[    /*
     *  This is the .NET client :-)
     */
]]></ClassHeader>
   </DotNetClient>

   <Exception ClassName="org.webpki.sks.SKSException">
     <Property Name="error" Type="int"/>
     <Property Name="message" Type="string"/>
   </Exception>

   <Method Name="abortProvisioningSession" Throws="SKSException">
     <Input Name="keyHandle" Type="int"/>
     <Code><![CDATA[
        if (keyHandle == 5)
          {
            throw new SKSException ("bad",4);
          }
]]></Code></Method>

   <Method Name="getKeyProtectionInfo" Throws="SKSException">
     <Input Name="key_handle" Type="int" XMLName="keyHandle"/>
     <Output Name="protection_status" Type="string" XMLName="ProtectionStatus"/>
     <Output Name="blah" Type="byte"/>
     <Output Name="x509_certificate" Type="binary" XMLName="X509Certificate" List="true"/>
     <Code><![CDATA[
        protection_status.value = "yes";
        blah.value = (byte)(key_handle + 2);
        List<byte[]> certs = new ArrayList<byte[]> ();
        certs.add (new byte[]{3,4,5});
        certs.add (new byte[]{3,4,8,9});
        x509_certificate.value = certs;
]]></Code></Method>

   <Method Name="setCertificatePath" Throws="SKSException">
     <Input Name="key_handle" Type="int" XMLName="KeyHandle"/>
     <Input Name="x509_certificate" Type="binary" XMLName="X509Certificate" List="true" Null="true"/>
     <Input Name="mac" Type="binary" XMLName="MAC"/>
     <Code><![CDATA[
        System.out.println ("Certs=" + (x509_certificate.size() == 0 ? "'null'" : x509_certificate.size ()) + " mac=" + mac.length);
]]></Code></Method>

   <Method Name="getVersion">
     <Output Name="return" Type="string"/>
     <Code><![CDATA[
        return "0.00001";
]]></Code></Method>

</WebService>
